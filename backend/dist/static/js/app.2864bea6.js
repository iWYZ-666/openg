(function(){var e={7103:function(e,t,a){"use strict";var i=a(6369),s=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{width:"100%"},attrs:{id:"app"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.popperShow,expression:"popperShow"}],staticClass:"popper"},[t("el-button",{staticStyle:{background:"#212529",border:"0",position:"absolute",right:"calc(2vw)",color:"white"},attrs:{icon:"el-icon-close",plain:""},on:{click:e.closePopper}}),t("PopperVue",{ref:"popper"})],1),t("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":e.activeIndex,mode:"horizontal","background-color":"#333357"},on:{select:e.handleSelect}},[t("el-menu-item",{staticStyle:{width:"100%"}},[t("div",{staticStyle:{display:"flex",width:"100%"}},[t("div",{staticStyle:{width:"15%","align-items":"center"}},[t("img",{staticStyle:{width:"25%","margin-left":"35%","vertical-align":"center"},attrs:{src:"/static/images/ECNU.ico"}})]),t("div",{staticStyle:{"font-size":"xx-large",color:"lightgray",width:"85%","text-align":"center"}},[e._v("开源协作网络可视化")])])])],1),t("div",{staticClass:"main"},[t("div",{staticClass:"sidebar"},[t("div",{staticClass:"sidebar-title",staticStyle:{"margin-top":"20px"}},[e._v("功能")]),t("div",{staticClass:"options"},[t("div",{staticClass:"option",on:{click:function(t){return e.go(t,"NetworkSearch")}}},[e._m(0)]),t("div",{staticClass:"option",on:{click:function(t){return e.go(t,"NetworkAnalyze")}}},[e._m(1)]),t("div",{staticClass:"option",on:{click:function(t){return e.go(t,"UserAnalyze")}}},[e._m(2)])]),e._m(3)]),t("div",{staticClass:"router-body"},[t("router-view",{ref:"router"})],1)]),t("EdgeInfo",{ref:"EdgeInfo"})],1)},n=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"option-content"},[t("i",{staticClass:"fa fa-edit"}),t("span",{staticClass:"option-text"},[e._v("协作网络检索")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"option-content"},[t("i",{staticClass:"fa fa-heartbeat"}),t("span",{staticClass:"option-text"},[e._v("协作网络分析")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"option-content"},[t("i",{staticClass:"fa fa-search"}),t("span",{staticClass:"option-text"},[e._v("用户协作分析")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"sidebar-form"},[t("div",{staticClass:"sidebar-title",staticStyle:{"margin-top":"20px"}},[e._v("数据")]),t("div",{staticClass:"options"},[t("div",{staticClass:"option"},[t("div",{staticClass:"option-content"},[t("i",{staticClass:"fa fa-cubes"}),t("span",{staticClass:"option-text"},[e._v("仓库数：73")])])]),t("div",{staticClass:"option"},[t("div",{staticClass:"option-content"},[t("i",{staticClass:"fa fa-hourglass-start"}),t("span",{staticClass:"option-text"},[e._v("2023-11-17")])])]),t("div",{staticClass:"option"},[t("div",{staticClass:"option-content"},[t("i",{staticClass:"fa fa-hourglass-end"}),t("span",{staticClass:"option-text"},[e._v("2023-11-17")])])])])])}],o=(a(7658),{name:"App",data(){return{}},created(){},mounted(){},methods:{go(e,t){if(void 0!=this.$refs.router.timer)for(var a=0;a<this.$refs.router.timer.length;a++)clearInterval(this.$refs.router.timer[a]);this.$router.push({name:t,params:{history:this.historyData}})}}}),r=o,l=a(1001),c=(0,l.Z)(r,s,n,!1,null,null,null),d=c.exports,h=a(2631),p=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{width:"100%",height:"calc(100vh)","overflow-y":"auto"}},[t("div",{staticClass:"search-content"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.uploading,expression:"uploading"}],staticClass:"search-area"},[t("div",{staticClass:"upload-info"},[t("el-descriptions",{attrs:{title:"统计信息"}},[t("template",{slot:"extra"}),t("el-descriptions-item",{attrs:{label:"账户数"}},[t("el-tag",{attrs:{size:"small"}},[e._v(e._s(this.NodeNumber))])],1),t("el-descriptions-item",{attrs:{label:"交易数"}},[t("el-tag",{attrs:{size:"small"}},[e._v(e._s(this.EdgeNumber))])],1),t("el-descriptions-item",{attrs:{label:"区块范围"}},[t("el-tag",{attrs:{size:"small",type:"primary"}},[e._v(e._s(this.blocknumber["min"]))]),e._v("~"),t("el-tag",{attrs:{type:"primary",size:"small"}},[e._v(e._s(this.blocknumber["max"]))])],1),t("el-descriptions-item",{attrs:{label:"标签数"}},[t("el-tag",{attrs:{size:"small",type:"primary"}},[e._v(e._s(this.labelNumber))])],1),t("el-descriptions-item",{attrs:{label:"异常行为数"}},[t("el-tag",{attrs:{size:"small",type:"primary"}},[e._v(e._s(this.labelNumber-1))])],1),t("el-descriptions-item",{attrs:{label:"查询时间"}},[t("el-tag",{attrs:{size:"small",type:"primary"}},[e._v(e._s(this.timestamp))])],1)],2)],1),t("div",{staticClass:"search-form"},[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[t("el-form-item",{attrs:{label:"标签"}},[t("el-select",{ref:"Labelselect",attrs:{placeholder:"label"},model:{value:e.labelSelect,callback:function(t){e.labelSelect=t},expression:"labelSelect"}},e._l(this.label,(function(e,a){return t("el-option",{key:a,attrs:{label:e,value:e}})})),1)],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")])],1)],1)],1)])]),t("el-tabs",{staticStyle:{"margin-left":"2%"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{staticStyle:{width:"100%"},attrs:{label:"概览图",name:"OverviewTab"}},[t("div",{staticClass:"search-result"},[t("div",{staticClass:"search-result"},[t("div",{staticClass:"table-result"},[t("OverviewGraph",{staticStyle:{width:"100%","min-height":"calc(66vh - 60px)"},attrs:{option:e.option4Overview}})],1)])])]),t("el-tab-pane",{staticStyle:{width:"100%"},attrs:{label:"时间轴",name:"GraphTab"}},[t("div",{staticClass:"search-result"},[t("div",{staticClass:"search-result"},[t("div",{staticClass:"table-result"},[t("NetGraph",{staticStyle:{width:"100%","min-height":"calc(66vh - 60px)"},attrs:{option:e.option4Graph}})],1)])])])],1)],1)},u=[],b=function(){var e=this,t=e._self._c;return t("div",[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","min-height":"100%","max-height":"100%",overflow:"auto"},attrs:{"element-loading-text":"Loading...","element-loading-spinner":"el-icon-loading",data:e.tableData}},[t("el-table-column",{attrs:{prop:"index",width:"100"}}),t("el-table-column",{attrs:{prop:"tag",label:"源账户",width:"320"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:"primary","disable-transitions":""}},[e._v(e._s(a.row.source))])]}}])}),t("el-table-column",{attrs:{prop:"tag",label:"账户数",width:"180"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:"success","disable-transitions":""}},[e._v(e._s(a.row.account))])]}}])}),t("el-table-column",{attrs:{prop:"tag",label:"交易数",width:"180"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:"success","disable-transitions":""}},[e._v(e._s(a.row.tx))])]}}])}),t("el-table-column",{attrs:{prop:"value",label:"金额",width:"200"}}),t("el-table-column",{attrs:{width:"90",label:"关系图"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{plain:"",id:"searchbutton",size:"mini"},on:{click:function(t){return e.openChild(t,a.row.label)}}},[t("span",[e._v("查看")])])]}}])})],1)],1)},m=[],f={name:"TableComponent",props:{open:{type:Function,default:null},update:{type:Function,default:null},data:{type:Array,default:function(){return[]}}},watch:{data(e){this.page=1,this.tableData=e,this.loading=!1}},methods:{deleteRow(e,t){t.splice(e,1)},handleCurrentChange(e){this.page=e},handleSizeChange(e){this.pageSize=e},OpenLoading(){this.loading=!0},openChild(e,t){this.$http.post("/data/search/",{label:t,blockNumberRange:[0,-1]},{headers:{"Content-Type":"application/json"}},{emulateJSON:!0}).then((function(e){this.open(e.body.json,!0)}))}},mounted(){this.tableData=this.update(),this.timer=setInterval((()=>{this.tableData=this.update(),console.log("更新Aberration...")}),1e3)},destroyed(){void 0!=this.timer&&clearInterval(this.timer)},data(){return{page:1,timer:void 0,tableData:[],loading:!1,pageSize:3}}},g=f,v=(0,l.Z)(g,b,m,!1,null,null,null),y=v.exports,w=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{width:"100%"}},[t("el-empty",{directives:[{name:"show",rawName:"v-show",value:e.empty,expression:"empty"}],staticStyle:{width:"100%"},attrs:{description:"No Data"}}),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.empty,expression:"!empty"}],staticClass:"chart-container",staticStyle:{width:"calc(81vw)",height:"calc(100vh)"},attrs:{id:"net"}})],1)},x=[],S={name:"NetGraph",props:["option"],data(){return{empty:!0,chart:void 0}},watch:{option(e){console.log(111),this.empty=!1,this.Draw(e)}},methods:{Draw:function(e){var t=echarts.init(document.getElementById("net"),"white",{renderer:"canvas"});t.clear(),t.setOption(e)}}},k=S,_=(0,l.Z)(k,w,x,!1,null,null,null),C=_.exports,N=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{width:"100%"}},[t("el-empty",{directives:[{name:"show",rawName:"v-show",value:e.empty,expression:"empty"}],staticStyle:{width:"100%"},attrs:{description:"No Data"}}),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.empty,expression:"!empty"}],staticClass:"chart-container",staticStyle:{width:"calc(81vw)",height:"calc(100vh)"},attrs:{id:"overview"}})],1)},z=[],O={name:"OverviewGraph",props:["option"],data(){return{empty:!0,chart:void 0}},watch:{option(e){console.log(111),this.empty=!1,this.Draw(e)}},methods:{Draw:function(e){var t=echarts.init(document.getElementById("overview"),"white",{renderer:"canvas"});t.clear(),t.setOption(e);let a=t.getOption(),i=new Array(a.series[0].data.length);for(var s=0;s<a.series[0].data.length;s++)i[s]=a.series[0].data[s].label.fontSize;t.getZr().on("mousewheel",(function(){let e=t.getOption(),a=e.series[0].zoom;for(var s=0;s<e.series[0].data.length;s++)e.series[0].data[s].label.fontSize=Math.ceil(i[s]*a);t.clear(),t.setOption(e,!0),this.chart=t}))}}},E=O,D=(0,l.Z)(E,N,z,!1,null,null,null),T=D.exports,I={name:"SearchComponent",props:{open:{type:Function,default:null},popper:{type:Function,default:null}},data(){return{activeName:"OverviewTab",fullshow:!1,option4Graph:{},option4Overview:{},uploading:!0,successNumber:0,labelNumber:0,NodeNumber:0,EdgeNumber:0,labelSelect:"",label:[],blocknumber:{max:void 0,min:void 0},timestamp:void 0}},components:{TableComponent:y,NetGraph:C,OverviewGraph:T},mounted(){this.$http.get("/data/info/",{},{headers:{"Content-Type":"application/json"}},{emulateJSON:!0}).then((function(e){this.code=200,this.labelNumber=e.body.labelNumber,this.blocknumber=e.body.blocknumberRange,this.timestamp=e.body.timestamp,this.NodeNumber=e.body.NodeNumber,this.EdgeNumber=e.body.EdgeNumber,this.label=e.body.label}),(function(e){this.code=e.status,this.message=e.body.message}))},methods:{openProp(){this.option4Graph!={}&&void 0!=this.option4Graph&&this.popper(this.option4Graph,!1)},search(){let e=this.labelSelect;this.$http.get("/data/timeline/",{params:{type:e}},{headers:{"Content-Type":"application/json"}},{emulateJSON:!0}).then((function(e){this.code=200,this.option4Graph=e.body.json}),(function(e){this.code=e.status,this.message=e.body.message})),this.$http.get("/data/overview/",{params:{type:e}},{headers:{"Content-Type":"application/json"}},{emulateJSON:!0}).then((function(e){this.code=200,this.option4Overview=e.body.json}),(function(e){this.code=e.status,this.message=e.body.message}))},openEdgeInfo(e,t,a,i,s){this.open(e,t,a,i,s)}}},j=I,A=(0,l.Z)(j,p,u,!1,null,null,null),U=(A.exports,function(){var e=this,t=e._self._c;return t("div",{staticStyle:{width:"100%",display:"flex","flex-direction":"column"}},[t("div",{staticClass:"eth-info"},[t("div",{staticClass:"eth"},[t("div",{staticClass:"eth-price"},[t("img",{staticClass:"info-img",attrs:{src:"/static/images/ethereum-1.svg"}}),t("div",{staticClass:"info-body"},[t("div",{staticClass:"info-tile"},[e._v("Ether Dashboard")]),t("el-switch",{attrs:{disabled:""},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}})],1),t("div",{staticClass:"info-body",staticStyle:{"margin-left":"10%"}},[t("div",{staticClass:"info-tile"},[e._v("监控时长")]),t("div",{staticClass:"info-content",staticStyle:{"font-weight":"700"}},[e._v(e._s(this.dashboard.hour)+":"+e._s(this.dashboard.minute<10?"0"+this.dashboard.minute:this.dashboard.minute)+":"+e._s(this.dashboard.seconds<10?"0"+this.dashboard.seconds:this.dashboard.seconds))])])])]),t("div",{staticClass:"transaction-block"},[t("div",{staticClass:"transaction"},[t("img",{staticClass:"info-img",attrs:{src:"/static/images/icon-2-1.svg"}}),e._m(0),t("div",{staticClass:"info-body",staticStyle:{"margin-left":"20%"}},[t("div",{staticClass:"info-tile"},[e._v("日交易量")]),t("div",{staticClass:"info-content",staticStyle:{color:"yellowgreen","font-weight":"700"}},[e._v(e._s(this.transactions.length+1e3))])])])]),t("div",{staticClass:"block"},[t("div",{staticClass:"block-latest"},[t("img",{staticClass:"info-img",attrs:{src:"/static/images/icon-51.svg"}}),t("div",{staticClass:"info-body"},[t("div",{staticClass:"info-tile"},[e._v("最新区块")]),t("div",{staticClass:"info-content",staticStyle:{"font-weight":"700",color:"skyblue"}},[e._v(e._s(this.blockNumber))])]),t("div",{staticClass:"info-body",staticStyle:{"margin-left":"10%"}},[t("div",{staticClass:"info-tile"},[e._v("出块时间")]),t("div",{staticClass:"info-content"},[t("span",{staticStyle:{color:"gray"}},[e._v(e._s(this.blockTime))])])])])])]),t("div",{staticStyle:{width:"98%",display:"flex","margin-top":"2%","margin-left":"2%"}},[t("div",{staticClass:"transaction-chart",staticStyle:{width:"70%"}},[t("div",{staticClass:"transaction-list",staticStyle:{width:"100%",border:"1px solid lightgray","border-radius":"1rem",padding:"2%",position:"relative"}},[e._m(1),e._l(this.transactions.slice(this.transactions.length-4,this.transactions.length),(function(a,i){return t("div",{key:i,staticClass:"transaction-item",staticStyle:{display:"flex",width:"100%","border-bottom":"1px solid lightgray",padding:"2%"}},[t("div",{staticStyle:{width:"25%",display:"flex","align-items":"center"}},[t("div",{staticStyle:{"background-color":"rgba(119,131,143,.1)","border-radius":"100%",height:"30px",width:"30px","line-height":"30px","text-align":"center","font-weight":"600","font-size":"small"}},[e._v("Tx")]),t("div",{staticClass:"tx-hash",staticStyle:{display:"flex","align-items":"center"}},[t("el-tag",{staticStyle:{width:"144px",overflow:"hidden"},attrs:{type:"primary",size:"small"}},[e._v(e._s(a.tx_hash))])],1)]),t("div",{staticStyle:{width:"25%",display:"flex","align-items":"center","justify-content":"center"}},[t("div",{staticStyle:{display:"flex","align-items":"center"}},[t("el-tag",{staticStyle:{width:"144px",overflow:"hidden"},attrs:{type:"primary",size:"small"}},[e._v(e._s(a.from_account))])],1)]),t("div",{staticStyle:{width:"25%",display:"flex","align-items":"center","justify-content":"center"}},[t("div",{staticStyle:{display:"flex","align-items":"center"}},[t("el-tag",{staticStyle:{width:"144px",overflow:"hidden"},attrs:{type:"primary",size:"small"}},[e._v(e._s(a.to_account))])],1)]),t("div",{staticStyle:{width:"25%","align-items":"center",display:"flex","justify-content":"center"}},[t("div",{staticStyle:{display:"flex","align-items":"center"}},[t("el-tag",{staticStyle:{width:"144px",overflow:"hidden"},attrs:{type:"success",size:"small"}},[e._v(e._s(a.timeStamp))])],1)])])}))],2)]),t("div",{staticClass:"dashboard-content",staticStyle:{width:"26%","margin-left":"2%",padding:"2%",border:"1px solid lightgray","border-radius":"1rem",position:"relative"}},[t("div",{staticStyle:{width:"80%",position:"absolute",top:"0",left:"10%",color:"gray","text-align":"center",height:"35px","line-height":"35px"}},[e._v("交易同步情况")]),t("div",{staticStyle:{width:"100%",height:"200px"},attrs:{id:"rate"}}),t("div",{staticStyle:{position:"absolute",bottom:"10px",height:"55px",width:"90%",display:"flex",left:"5%"}},[t("div",{staticClass:"dashboard-little-area",staticStyle:{width:"45%"}},[t("div",{staticStyle:{height:"20px","line-height":"20px","text-align":"center",width:"100%","font-size":"small","font-weight":"600",color:"gray"}},[e._v("已同步交易")]),t("div",{staticStyle:{height:"35px","line-height":"35px","text-align":"center",width:"100%","font-size":"large","font-weight":"600"}},[t("span",{staticStyle:{color:"orange","font-size":"x-large",height:"35px","line-height":"35px"}},[e._v(e._s(this.transactions.length+900))])])]),t("div",{staticClass:"dashboard-little-area",staticStyle:{width:"45%","margin-left":"10%"}},[t("div",{staticStyle:{height:"20px","line-height":"20px","text-align":"center",width:"100%","font-size":"small","font-weight":"600",color:"gray"}},[e._v("发现异常行为")]),t("div",{staticStyle:{height:"35px","line-height":"35px","text-align":"center",width:"100%","font-size":"large","font-weight":"600"}},[t("span",{staticStyle:{color:"red","font-size":"x-large",height:"35px","line-height":"35px"}},[e._v(e._s(this.aberration.length))])])])])])]),t("el-tabs",{staticStyle:{"margin-left":"2%"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"异常",name:"TableTab"}},[t("div",{staticStyle:{width:"100%",height:"calc(35vh)",display:"flex",overflow:"auto"}},[t("TableComponent",{ref:"table",attrs:{data:e.aberration,open:e.popper,update:e.updateAberration}})],1)])],1)],1)}),F=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"info-body"},[t("div",{staticClass:"info-tile"},[e._v("总交易量")]),t("div",{staticClass:"info-content",staticStyle:{color:"orange","font-weight":"700"}},[e._v("1860.1M")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"transaction-title"},[t("div",{staticStyle:{display:"flex",width:"96%",margin:"0 auto",height:"30px","line-height":"30px","padding-left":"2%","padding-right":"2%"}},[t("div",{staticStyle:{width:"25%","text-align":"center",color:"black","font-weight":"500",height:"30px","line-height":"30px","padding-left":"2%","padding-right":"2%"}},[e._v("哈希值")]),t("div",{staticStyle:{width:"25%","text-align":"center",color:"black","font-weight":"500",height:"30px","line-height":"30px","padding-left":"2%","padding-right":"2%"}},[e._v("转出账户")]),t("div",{staticStyle:{width:"25%","text-align":"center",color:"black","font-weight":"500",height:"30px","line-height":"30px","padding-left":"2%","padding-right":"2%"}},[e._v("转入账户")]),t("div",{staticStyle:{width:"25%","text-align":"center",color:"black","font-weight":"500",height:"30px","line-height":"30px","padding-left":"2%","padding-right":"2%"}},[e._v("时间戳")])])])}],$={name:"DashBoard",data(){return{ethusd:1586.36,ethbtc:.06847,ethsupply:void 0,activeName:"TableTab",transactions:[],timer:[],aberration:[],value1:!0,blockNumber:16540597,txTimer:void 0,blockTime:"Unknown",dashboard:{hour:734,minute:46,seconds:1}}},props:{history:{type:Object,default:{}},popper:{type:Function,default:null},blockTime:{type:String,default:"Unknown"},transactions:{type:Array,default:[]},aberration:{type:Function,default:null},blockNumber:{type:Number,default:16540597},dashboard:{type:Object,default:{hour:734,minute:46,seconds:1}}},watch:{transactions(e){this.transactions=e},aberration(e){this.aberration=e},blockNumber(e){this.blockNumber=e},blockTime(e){this.blockTime=e},dashboard(e){this.dashboard=e}},components:{TableComponent:y},mounted(){this.setRateOption(this.transactions),this.timer.push(setInterval((()=>{this.setRateOption(this.transactions)}),500))},methods:{setBarOption(e,t){var a=echarts.init(document.getElementById("bar"),"white",{renderer:"canvas"}),i={animation:!0,animationThreshold:2e3,animationDuration:1e3,animationEasing:"cubicOut",animationDelay:0,animationDurationUpdate:300,animationEasingUpdate:"cubicOut",animationDelayUpdate:0,color:["skyblue","#2f4554","#61a0a8","#d48265","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3","#f05b72","#ef5b9c","#f47920","#905a3d","#fab27b","#2a5caa","#444693","#726930","#b2d235","#6d8346","#ac6767","#1d953f","#6950a1","#918597"],series:[{type:"bar",name:"商家A",legendHoverLink:!0,data:e,showBackground:!1,barMinHeight:0,barCategoryGap:"20%",barGap:"30%",large:!1,largeThreshold:400,seriesLayoutBy:"column",datasetIndex:0,clip:!0,zlevel:0,z:2,label:{show:!0,position:"top",margin:8}}],tooltip:{show:!0,trigger:"item",triggerOn:"mousemove|click",axisPointer:{type:"line"},showContent:!0,alwaysShowContent:!1,showDelay:0,hideDelay:100,textStyle:{fontSize:14},borderWidth:0,padding:5},xAxis:[{show:!0,scale:!1,nameLocation:"end",nameGap:15,gridIndex:0,inverse:!1,offset:0,splitNumber:5,minInterval:0,splitLine:{show:!1,lineStyle:{show:!0,width:1,opacity:1,curveness:0,type:"solid"}},data:t}],yAxis:[{show:!0,scale:!1,nameLocation:"end",nameGap:15,gridIndex:0,inverse:!1,offset:0,splitNumber:5,minInterval:0,splitLine:{show:!1,lineStyle:{show:!0,width:1,opacity:1,curveness:0,type:"solid"}}}],title:[{text:"异常行为金额对比",padding:5,itemGap:10,color:"gray"}],dataZoom:{show:!0,type:"slider",realtime:!0,orient:"horizontal",zoomLock:!1,filterMode:"filter"}};a.setOption(i)},setRateOption(e){let t={animation:!0,animationThreshold:2e3,animationDuration:1e3,animationEasing:"cubicOut",animationDelay:0,animationDurationUpdate:300,animationEasingUpdate:"cubicOut",animationDelayUpdate:0,color:["#c23531","#2f4554","#61a0a8","#d48265","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3","#f05b72","#ef5b9c","#f47920","#905a3d","#fab27b","#2a5caa","#444693","#726930","#b2d235","#6d8346","#ac6767","#1d953f","#6950a1","#918597"],series:[{type:"liquidFill",name:"lq",data:[(e.length+900)/(e.length+1e3)],waveAnimation:!0,animationDuration:2e3,animationDurationUpdate:1e3,color:["#294D99","#156ACF","#1598ED","#45BDFF"],shape:"circle",backgroundStyle:{},outline:{show:!0,borderDistance:8},label:{show:!0,position:"inside",margin:8,fontSize:25,formatter:function(e){e.value}}}],legend:[{data:[],selected:{},show:!0,padding:5,itemGap:10,itemWidth:25,itemHeight:14}],tooltip:{show:!0,trigger:"item",triggerOn:"mousemove|click",axisPointer:{type:"line"},showContent:!0,alwaysShowContent:!1,showDelay:0,hideDelay:100,textStyle:{fontSize:14},borderWidth:0,padding:5}};var a=echarts.init(document.getElementById("rate"),"white",{renderer:"canvas"});a.clear(),a.setOption(t)},updateAberration(){return this.aberration},getTransaction(){this.$http.get("/block/transaction/",{params:{index:this.transactions.length}},{headers:{"Content-Type":"application/json"}},{emulateJSON:!0}).then((function(e){e.body.transaction["tx_hash"]!=this.transactions[this.transactions.length-1]["tx_hash"]&&(this.dailyTx+=1,this.transactions.push(e.body.transaction),this.setRateOption(this.transactions),e.body.flag&&(console.log("检测到异常"+e.body.result),this.$http.get("/block/abberration/",{params:{type:e.body.result}},{headers:{"Content-Type":"application/json"}},{emulateJSON:!0}).then((function(e){this.aberration.push({index:this.aberration.length,source:e.body.source,account:e.body.account,value:e.body.value,tx:e.body.tx,label:e.body.label}),this.change(this.transactions,this.aberration,this.blockNumber,this.blockTime)}))),this.change(this.transactions,this.aberration,this.blockNumber,this.blockTime))}))}}},M=$,G=(0,l.Z)(M,U,F,!1,null,null,null),L=(G.exports,function(){var e=this,t=e._self._c;return t("div",{staticStyle:{width:"100%"}},[t("div",{staticClass:"upload-content"},[t("div",{staticClass:"ns-search-area"},[t("div",{staticClass:"search-form"},[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[t("el-form-item",{attrs:{label:"仓库名"}},[t("el-select",{attrs:{placeholder:"name"},model:{value:e.networkSearchName,callback:function(t){e.networkSearchName=t},expression:"networkSearchName"}},e._l(e.totalName,(function(e,a){return t("el-option",{key:a,attrs:{label:e,value:e}})})),1)],1),t("el-form-item",{attrs:{label:"年份"}},[t("el-select",{attrs:{placeholder:"year"},model:{value:e.networkSearchYear,callback:function(t){e.networkSearchYear=t},expression:"networkSearchYear"}},e._l(e.totalYear,(function(e,a){return t("el-option",{key:a,attrs:{label:e,value:e}})})),1)],1),t("el-form-item",{attrs:{label:"月份"}},[t("el-select",{attrs:{placeholder:"month"},model:{value:e.networkSearchMonth,callback:function(t){e.networkSearchMonth=t},expression:"networkSearchMonth"}},e._l(e.totalMonth,(function(e,a){return t("el-option",{key:a,attrs:{label:e,value:e}})})),1)],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.NetworkSearch}},[e._v("查询")])],1)],1)],1)]),t("div",{staticClass:"ns-result-area"},[t("div",{staticClass:"ns-graph-area"},[t("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"关系图",name:"first"}},[t("el-empty",{directives:[{name:"show",rawName:"v-show",value:!e.is_search,expression:"!is_search"}],attrs:{description:"无结果"}}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.is_search,expression:"is_search"}],attrs:{id:"graph"}})],1)],1)],1),t("div",{staticClass:"ns-data-area"},[t("div",{staticClass:"ns-info-area"},[t("div",{staticStyle:{width:"90%",margin:"0 auto","margin-top":"2%"}},[t("div",{staticStyle:{"font-size":"larger","text-align":"center","margin-bottom":"5%"}},[e._v("查询信息")]),t("el-descriptions",{attrs:{column:"2"}},[t("template",{slot:"extra"}),t("el-descriptions-item",{attrs:{label:"仓库名"}},[t("el-tag",{attrs:{size:"small"}},[e._v(e._s(this.info.name))])],1),t("el-descriptions-item",{attrs:{label:"时间"}},[t("el-tag",{attrs:{size:"small"}},[e._v(e._s(this.info.year)+"-"+e._s(this.info.month))])],1),t("el-descriptions-item",{attrs:{label:"用户数"}},[t("el-tag",{attrs:{size:"small",type:"primary"}},[e._v(e._s(this.info.userNumber))])],1),t("el-descriptions-item",{attrs:{label:"pr数"}},[t("el-tag",{attrs:{size:"small",type:"primary"}},[e._v(e._s(this.info.pr))])],1),t("el-descriptions-item",{attrs:{label:"issue数"}},[t("el-tag",{attrs:{size:"small",type:"primary"}},[e._v(e._s(this.info.issue))])],1)],2)],1)]),t("div",{staticClass:"ns-rank-area"},[t("RankComponent",{attrs:{data:e.openRank}})],1)])])])])}),B=[],W=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{height:"100%"}},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","min-height":"100%","max-height":"100%",overflow:"auto"},attrs:{"element-loading-text":"Loading...","element-loading-spinner":"el-icon-loading",data:e.rankData.slice(this.page*this.pageSize-this.pageSize,this.page*this.pageSize)}},[t("el-table-column",{attrs:{prop:"index",label:"Rank"}}),t("el-table-column",{attrs:{prop:"tag",label:"name"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:"primary","disable-transitions":""}},[e._v(e._s(a.row.name))])]}}])}),t("el-table-column",{attrs:{prop:"tag",label:"OpenRank"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:"success","disable-transitions":""}},[e._v(e._s(a.row.rank))])]}}])})],1),t("el-pagination",{staticStyle:{"margin-top":"3%"},attrs:{background:"","page-size":this.pageSize,"pager-count":2,"page-sizes":[this.pageSize],total:this.rankData.length,layout:"total, prev, pager, next"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},X=[],P={name:"RankComponent",props:{open:{type:Function,default:null},update:{type:Function,default:null},data:{type:Array,default:function(){return{}}}},watch:{data(e){this.page=1,this.rankData=e,this.loading=!1}},methods:{deleteRow(e,t){t.splice(e,1)},handleCurrentChange(e){this.page=e},handleSizeChange(e){this.pageSize=e},OpenLoading(){this.loading=!0},openChild(e,t){this.$http.post("/data/search/",{label:t,blockNumberRange:[0,-1]},{headers:{"Content-Type":"application/json"}},{emulateJSON:!0}).then((function(e){this.open(e.body.json,!0)}))}},mounted(){},destroyed(){void 0!=this.timer&&clearInterval(this.timer)},data(){return{page:1,timer:void 0,loading:!1,pageSize:7,rankData:[]}}},R=P,Y=(0,l.Z)(R,W,X,!1,null,null,null),J=Y.exports,Z={name:"NetworkSearchComponent",data(){return{activeName:"first",is_search:!1,totalName:["alibaba/canal","alibaba/druid","apache/pulsar","aliyun/terraform-provider-alicloud","alibaba/ice","alibaba/DataX","alibaba/easyexcel","midwayjs/midway","alibaba/Sentinel","alibaba/nacos","alibaba/spring-cloud-alibaba","labring/sealos","alibaba/arthas","hypertrons/hypertrons","openyurtio/openyurt","X-lab2017/X-lab2017.github.io","hypertrons/hypertrons-crx","X-lab2017/open-digger","alibaba/GraphScope","sealerio/sealer","hypertrons/hypertrons-crx-website","ApsaraDB/PolarDB-for-PostgreSQL","labring/laf","polardb/polardbx-sql","X-lab2017/open-galaxy","alibaba/lowcode-engine","X-lab2017/open-research","X-lab2017/open-leaderboard","X-lab2017/open-wonderland","X-lab2017/open-perf","alibaba/fastjson2","OpenEduTech/EduTechResearch","OpenEduTech/OpenEduKG","X-lab2017/open-certified","alibaba/havenask","modelscope/modelscope","redis/redis","seata/seata","opensergo/opensergo-specification","opensergo/opensergo-dashboard","opensergo/opensergo-java-sdk","opensergo/opensergo-control-plane","opensergo/opensergo-go-sdk","alibaba/lowcode-code-generator-demo","alibaba/lowcode-materials","alibaba/lowcode-plugins","alibaba/lowcode-tools","alibaba/lowcode-demo","alibaba/lowcode-engine-ext","alibaba/lowcode-datasource","kubevela/catalog","kubevela/kubevela","fluid-cloudnative/fluid","kubevela/velaux","kubevela/kubevela.io","kubevela/terraform-controller","kubevela/velad","kubevela/workflow","kubevela/kube-trigger","kubevela/pkg","X-lab2017/od-api","X-lab2017/oss101","nacos-group/nacos-spring-project","nacos-group/nacos-spring-boot-project","nacos-group/nacos-docker","nacos-group/nacos-k8s","nacos-group/nacos-sdk-go","nacos-group/nacos-sdk-python","nacos-group/nacos-sdk-csharp","nacos-group/nacos-sdk-cpp","nacos-group/nacos-plugin","nacos-group/nacos-sdk-rust","openyurtio/yurt-edgex-manager"],totalYear:[2020,2021,2022,2023],totalMonth:[1,2,3,4,5,6,7,8,9,10,11,12],networkSearchName:"",networkSearchYear:"",networkSearchMonth:"",openRank:[],info:{userNumber:0,pr:0,issue:0,name:"Unknown",year:"Unknown",month:"Unknown"},empty:!0,chart:void 0,graph:void 0,nodesNumber:0,edgesNumber:0,nodes:[{id:"0x75cd2467f8dd731a5acb927bd79c4cb361210db6",degree:2,cluster:-1},{id:"0xc611952d81e4ecbd17c8f963123dec5d7bce1c27",degree:2},{id:"0x4de23f3f0fb3318287378adbde030cf61714b2f3",degree:1}],edges:[{source:"0x75cd2467f8dd731a5acb927bd79c4cb361210db6",target:"0xc611952d81e4ecbd17c8f963123dec5d7bce1c27",value:"299928147539103754",tx_hash:"0xa1a658f372e0637d00b78753036068d71d48da9d6a924e8f6443bc3e5bbec940",blockNumber:"15265907"},{source:"0x75cd2467f8dd731a5acb927bd79c4cb361210db6",target:"0x4de23f3f0fb3318287378adbde030cf61714b2f3",value:"9000000000000000",tx_hash:"0x0dcf54ffa7d83238b8a44a9c2385a2d58a9f0d326116f293ba351076dbb38d4a",blockNumber:"15265929"},{source:"0x8bc90377daf1b4e71686d025c88b2178089cf3e8",target:"0xc611952d81e4ecbd17c8f963123dec5d7bce1c27",value:"2611540377663885806",tx_hash:"0x5ff169a9301adf698f6e78bd8c715aebb7fdd5404e24ef5b926a10adbc1b8772",blockNumber:"15265903"},{source:"0x1a26db1b2baf0b23f18e19375e8fdc159feb707e",target:"0xc611952d81e4ecbd17c8f963123dec5d7bce1c27",value:"473558773599046477",tx_hash:"0xc708b1f3315db9966a677782efc896364803cb457cdfc2ae76ff9141935fd532",blockNumber:"15265905"},{source:"0x43da6d2db9651b7042e31ffb2607a7cfa4d5d03b",target:"0xc611952d81e4ecbd17c8f963123dec5d7bce1c27",value:"621618643271362538",tx_hash:"0x51927ba1b63a5adf90dc8a673b459c9e5e3e42c2ae3157ca57ae7a54232c75a0",blockNumber:"15265905"},{source:"0xe5c04c954c5494f6975f63e3f19957a380648f82",target:"0xc611952d81e4ecbd17c8f963123dec5d7bce1c27",value:"223324337176025309",tx_hash:"0x0c3ecd77775785129d70adcb43c656c854f22699f3350aa17693af608d3729ee",blockNumber:"15265907"},{source:"0x795d8f8b2bf1bb23e99e165c8e4fa067d96cb00a",target:"0xc611952d81e4ecbd17c8f963123dec5d7bce1c27",value:"216300000000000000",tx_hash:"0xf59060ff06f14fd261a81272b562afe7c4a9a5642ead937962858a8f54a601b9",blockNumber:"15265907"},{source:"0xbdf4cf8269c3883dd88975e1978a6aa9d3877f2e",target:"0xc611952d81e4ecbd17c8f963123dec5d7bce1c27",value:"288173851825282417",tx_hash:"0x851c13f6fd11fe61bc40e6f071d1bd1fb2b667adbed715534c3a631c48c5eb49",blockNumber:"15265907"},{source:"0x1e29e2cefd3395d892678add3eb791ed74114f3b",target:"0xc611952d81e4ecbd17c8f963123dec5d7bce1c27",value:"284693896987212129",tx_hash:"0x1ddbf38bf57786d3e1079cc53a81168f0b7ac958b838bdfeb6a77dfb1cc134af",blockNumber:"15265907"},{source:"0x47537db3dfec13e9f20fb4f4cd0cf26e2cc37fdd",target:"0xc611952d81e4ecbd17c8f963123dec5d7bce1c27",value:"265102276730551319",tx_hash:"0x24dca1ae019a880520049e5ac75d6a49c009cb3dfe59de0b6261859070ec0ae3",blockNumber:"15265907"},{source:"0x4842336fdaf0405e12c7e968dc1998856672a4d7",target:"0xc611952d81e4ecbd17c8f963123dec5d7bce1c27",value:"373844808070480320",tx_hash:"0xec5da3e3ec57dc29b534888f9874b1733f0d425518180bce2ba8e2511ac4119c",blockNumber:"15266086"},{source:"0x6e8b6af9d8b402d89d1f5d8c1cf535850dc28b98",target:"0xc611952d81e4ecbd17c8f963123dec5d7bce1c27",value:"116709184816773670",tx_hash:"0x8992fd93bc4dd5fb7a811718313802cc4b6043a9aad6ef847c35ebb47326273a",blockNumber:"15266104"},{source:"0xa789d472cfef01e09674e4a6c03b35c72e0bfdb0",target:"0xc611952d81e4ecbd17c8f963123dec5d7bce1c27",value:"1847142590831247533",tx_hash:"0x18e0e10013a4d14535f465e54f051c34607f4c654b2c59a6ac58e5588ee07363",blockNumber:"15266490"}]}},components:{RankComponent:J},mounted(){},methods:{drawGraph:function(e,t){void 0!=this.chart&&this.chart.destroy(),void 0!=this.graph&&(this.graph.destroy(),this.graph=void 0);const a=new this.$antv.Tooltip({offsetX:10,offsetY:10,itemTypes:["node","edge"],getContent:e=>{const t=document.createElement("div");function a(e){switch(e){case"r":return"repository";case"u":return"user";case"i":return"issue";default:return"pull request"}}return t.style.padding="0px 40px 0px 20px","node"==e.item.getType()?t.innerHTML=`\n        <h4>节点信息</h4>\n        <ul>\n            <li>ID: ${e.item.getModel().id}</li>\n            <li>名称: ${e.item.getModel().n}</li>\n            <li>类别: ${a(e.item.getModel().c)}</li>\n            <li>OpenRank值: ${e.item.getModel().v}</li>\n        </ul>`:"edge"==e.item.getType()&&(t.innerHTML=`\n        <h4>边信息</h4>\n        <ul>\n          <li>起点ID: ${e.item.getModel().source}</li>\n          <li>终点ID: ${e.item.getModel().target}</li>\n          <li>边权重: ${e.item.getModel().weight}</li>\n        </ul>\n        `),t},shouldBegin:e=>{let t=!0;switch(e.item.getModel().id){case"1":t=!1;break;case"2":t="text-shape"===e.target.get("name");break;case"3":t="text-shape"!==e.target.get("name");break;default:t=!0;break}return t}}),i=document.getElementById("graph"),s=800,n=600,o=10,r=20,l=15,c={r:{type:"rect",size:r,style:{fill:"#5B6FBF"}},u:{type:"rect",size:r,style:{fill:"#DE6F6A"}},i:{type:"rect",size:r,style:{fill:"#9EC97F"}},p:{type:"rect",size:r,style:{fill:"#F2C96C"}}},d={nodes:[{id:"r",label:"repo",...c["r"],labelCfg:{style:{fontSize:l}}},{id:"u",label:"user",...c["u"],labelCfg:{style:{fontSize:l}}},{id:"i",label:"issue",...c["i"],labelCfg:{style:{fontSize:l}}},{id:"p",label:"pull",...c["p"],labelCfg:{style:{fontSize:l}}}]},h=new this.$antv.Legend({data:d,align:"center",layout:"horizontal",vertiSep:12,horiSep:24,offsetY:n-75,padding:[4,16,8,16],containerStyle:{fill:"",lineWidth:0},title:" ",titleConfig:{position:"center",offsetX:0,offsetY:0},filter:{enable:!0,multiple:!0,trigger:"click",graphActiveState:"activeByLegend",graphInactiveState:"inactiveByLegend",filterFunctions:{r:e=>"r"===e.c,u:e=>"u"===e.c,i:e=>"i"===e.c,p:e=>"p"===e.c}}}),p=new this.$antv.ToolBar({position:{x:25,y:10}}),u=new this.$antv.Graph({container:"graph",width:s,height:n,layout:{preventOverlap:!0,type:"force",nodeSpacing:15},defaultNode:{size:15,lineWidth:0,style:{lineWidth:0}},nodeStateStyles:{activeByLegend:{lineWidth:3,strokeOpacity:.5,stroke:"#f00"},inactiveByLegend:{opacity:.5,lineWidth:0,strokeOpacity:0,stroke:""},dark:{lineWidth:0,opacity:.2},mouseenterState:{lineWidth:3,strokeOpacity:.5,stroke:"#5B8FF9"},noLineWidthState:{lineWidth:0}},edgeStateStyles:{mouseenterState:{lineWidth:1.5,stroke:"#999"}},plugins:[h,a,p],modes:{default:["drag-canvas","drag-node","zoom-canvas"]}});function b(e){switch(e){case"r":return"#5B6FBF";case"u":return"#DE6F6A";case"i":return"#9EC97F";default:return"#F2C96C"}}function m(e,t,a){return e<=a?t*e:m(e-a,t/2,a)+a*t}function f(e){return e.sort(((e,t)=>t.v-e.v)),e[o-1].v}function g(e,t){switch(e){case"r":return t;case"u":return t;case"i":return"#"+t;default:return"#"+t}}function v(e){const t=e.item.get("model");t.fx=e.x,t.fy=e.y}fetch("https://oss.x-lab.info/open_digger/github/X-lab2017/open-digger/project_openrank_detail/2022-12.json").then((e=>e.json())).then((a=>{function s(){u.setAutoPaint(!1),u.getNodes().forEach((function(e){u.clearItemStates(e),u.setItemState(e,"noLineWidthState",!0)})),u.getEdges().forEach((function(e){u.clearItemStates(e),u.setItemState(e,"noLineWidthState",!0)})),u.paint(),u.setAutoPaint(!0)}e=a.nodes,t=a.links.map((function(e,t){return e.source=e.s,e.target=e.t,e.weight=e.w,Object.assign({},e)})),e.forEach((t=>{t.size=m(t.v,6,2),t.style={fill:b(t.c),lineWidth:0},t.v>=f(e)&&(t.label=g(t.c,t.n),t.labelCfg={position:"bottom"})})),u.data({nodes:e,edges:t}),u.render(),u.on("node:dragstart",(function(e){u.layout(),v(e)})),u.on("node:drag",(function(e){const t=u.get("layoutController").layoutMethods[0];t.execute(),v(e)})),u.on("node:dragend",(function(e){e.item.get("model").fx=null,e.item.get("model").fy=null})),u.on("node:click",(e=>{const{item:t}=e;t.toFront()})),u.on("node:mouseenter",(function(e){const t=e.item;u.setAutoPaint(!1),u.getNodes().forEach((function(e){u.clearItemStates(e),u.setItemState(e,"dark",!0)})),u.setItemState(t,"dark",!1),u.setItemState(t,"mouseenterState",!0),u.getEdges().forEach((function(e){e.getSource()===t?(u.setItemState(e.getTarget(),"dark",!1),u.setItemState(e.getTarget(),"mouseenterState",!0),u.setItemState(e,"mouseenterState",!0),e.toFront()):e.getTarget()===t?(u.setItemState(e.getSource(),"dark",!1),u.setItemState(e.getSource(),"mouseenterState",!0),u.setItemState(e,"mouseenterState",!0),e.toFront()):u.setItemState(e,"mouseenterState",!1)})),u.paint(),u.setAutoPaint(!0)})),u.on("node:mouseleave",s),u.on("canvas:click",s),"undefined"!==typeof window&&(window.onresize=()=>{u&&!u.get("destroyed")&&i&&i.scrollWidth&&i.scrollHeight&&u.changeSize(i.scrollWidth,i.scrollHeight)})})),this.graph=u},NetworkSearch:function(){console.log("NetworkSearch: ",this.networkSearchName,this.networkSearchYear,this.networkSearchMonth),this.$http.post("/api/NetworkSearch/",{name:this.networkSearchName,year:this.networkSearchYear,month:this.networkSearchMonth},{headers:{"Content-Type":"application/json"}},{emulateJSON:!0}).then((function(e){this.code=200,this.is_search=!0,this.drawGraph(e.body.option.nodes,e.body.option.edges),this.info=e.body.info,this.openRank=e.body.openRank}),(function(e){this.is_search=!0,this.drawGraph(this.nodes,this.edges),this.openRank=[{index:1,name:"aaa",rank:20}]}))}}},H=Z,q=(0,l.Z)(H,L,B,!1,null,null,null),V=q.exports,K=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{width:"100%"}},[t("div",{staticClass:"upload-content"},[t("div",{staticClass:"na-search-area"},[t("div",{staticClass:"search-form"},[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[t("el-form-item",{attrs:{label:"仓库名"}},[t("el-select",{attrs:{placeholder:"name"},model:{value:e.NetworkAnalyzeName,callback:function(t){e.NetworkAnalyzeName=t},expression:"NetworkAnalyzeName"}},e._l(e.totalName,(function(e,a){return t("el-option",{key:a,attrs:{label:e,value:e}})})),1)],1),t("el-form-item",{attrs:{label:"年份"}},[t("el-select",{attrs:{placeholder:"year"},model:{value:e.NetworkAnalyzeYear,callback:function(t){e.NetworkAnalyzeYear=t},expression:"NetworkAnalyzeYear"}},e._l(e.totalYear,(function(e,a){return t("el-option",{key:a,attrs:{label:e,value:e}})})),1)],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.NetworkAnalyze}},[e._v("查询")])],1)],1)],1)]),t("div",{staticClass:"na-result-area"},[t("div",{staticClass:"na-chart-area"},[t("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"仓库数据",name:"first"}},[t("el-empty",{directives:[{name:"show",rawName:"v-show",value:!e.is_search,expression:"!is_search"}],attrs:{description:"无结果"}}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.is_search,expression:"is_search"}],staticStyle:{width:"800px",height:"600px",margin:"0 auto"},attrs:{id:"line"}})],1)],1)],1),t("div",{staticClass:"na-data-area"},[t("div",{staticClass:"na-info-area"},[t("div",{staticStyle:{width:"90%",margin:"0 auto","margin-top":"2%"}},[t("div",{staticStyle:{"font-size":"larger","text-align":"center","margin-bottom":"5%"}},[e._v("查询信息")]),t("el-descriptions",{attrs:{column:"2"}},[t("template",{slot:"extra"}),t("el-descriptions-item",{attrs:{label:"仓库名"}},[t("el-tag",{attrs:{size:"small"}},[e._v(e._s(this.info.name))])],1),t("el-descriptions-item",{attrs:{label:"年份"}},[t("el-tag",{attrs:{size:"small"}},[e._v(e._s(this.info.year))])],1)],2),t("el-descriptions",{attrs:{column:"2"}},[t("template",{slot:"extra"}),t("el-descriptions-item",{attrs:{label:"request数"}},[t("el-tag",{attrs:{size:"small"}},[e._v(e._s(this.info.request))])],1),t("el-descriptions-item",{attrs:{label:"issue数"}},[t("el-tag",{attrs:{size:"small"}},[e._v(e._s(this.info.issue))])],1),t("el-descriptions-item",{attrs:{label:"user数"}},[t("el-tag",{attrs:{size:"small"}},[e._v(e._s(this.info.user))])],1)],2)],1)]),t("div",{staticClass:"na-rank-area"},[t("RankComponent",{attrs:{data:e.openRank}})],1)])])])])},Q=[],ee={name:"NetworkAnalyzeComponent",data(){return{is_search:!1,totalName:["alibaba/canal","alibaba/druid","apache/pulsar","aliyun/terraform-provider-alicloud","alibaba/ice","alibaba/DataX","alibaba/easyexcel","midwayjs/midway","alibaba/Sentinel","alibaba/nacos","alibaba/spring-cloud-alibaba","labring/sealos","alibaba/arthas","hypertrons/hypertrons","openyurtio/openyurt","X-lab2017/X-lab2017.github.io","hypertrons/hypertrons-crx","X-lab2017/open-digger","alibaba/GraphScope","sealerio/sealer","hypertrons/hypertrons-crx-website","ApsaraDB/PolarDB-for-PostgreSQL","labring/laf","polardb/polardbx-sql","X-lab2017/open-galaxy","alibaba/lowcode-engine","X-lab2017/open-research","X-lab2017/open-leaderboard","X-lab2017/open-wonderland","X-lab2017/open-perf","alibaba/fastjson2","OpenEduTech/EduTechResearch","OpenEduTech/OpenEduKG","X-lab2017/open-certified","alibaba/havenask","modelscope/modelscope","redis/redis","seata/seata","opensergo/opensergo-specification","opensergo/opensergo-dashboard","opensergo/opensergo-java-sdk","opensergo/opensergo-control-plane","opensergo/opensergo-go-sdk","alibaba/lowcode-code-generator-demo","alibaba/lowcode-materials","alibaba/lowcode-plugins","alibaba/lowcode-tools","alibaba/lowcode-demo","alibaba/lowcode-engine-ext","alibaba/lowcode-datasource","kubevela/catalog","kubevela/kubevela","fluid-cloudnative/fluid","kubevela/velaux","kubevela/kubevela.io","kubevela/terraform-controller","kubevela/velad","kubevela/workflow","kubevela/kube-trigger","kubevela/pkg","X-lab2017/od-api","X-lab2017/oss101","nacos-group/nacos-spring-project","nacos-group/nacos-spring-boot-project","nacos-group/nacos-docker","nacos-group/nacos-k8s","nacos-group/nacos-sdk-go","nacos-group/nacos-sdk-python","nacos-group/nacos-sdk-csharp","nacos-group/nacos-sdk-cpp","nacos-group/nacos-plugin","nacos-group/nacos-sdk-rust","openyurtio/yurt-edgex-manager"],totalYear:[2020,2021,2022,2023],openRank:[],info:{name:"Unknown",user:0,issue:0,year:"Unknown",request:0},pie_data:[{name:"Core Developers",value:100},{name:"Temporary Developers",value:20},{name:"Issue Participants",value:50}],activeName:"first",NetworkAnalyzeName:"",NetworkAnalyzeYear:"",user:[["一月",4],["二月",5],["三月",2],["四月",4],["五月",3],["六月",6],["七月",7],["八月",4],["九月",4],["十月",21],["十一月",10],["十二月",10]],request:[["一月",4],["二月",5],["三月",3],["四月",4],["五月",4],["六月",6],["七月",7],["八月",9],["九月",4],["十月",1],["十一月",10],["十二月",1]],issue:[["一月",5],["二月",3],["三月",4],["四月",5],["五月",6],["六月",6],["七月",7],["八月",9],["九月",4],["十月",9],["十一月",10],["十二月",1]]}},components:{RankComponent:J},mounted(){},methods:{NetworkAnalyze:function(){console.log("NetworkAnalyze: ",this.NetworkAnalyzeName,this.NetworkAnalyzeYear),this.$http.post("/api/NetworkAnalyze/",{name:this.NetworkAnalyzeName,year:this.NetworkAnalyzeYear},{headers:{"Content-Type":"application/json"}},{emulateJSON:!0}).then((function(e){this.code=200,this.is_search=!0,this.openRank=e.body.openRank,this.info=e.body.info,this.DrawLine(e.body.line.issue,e.body.line.request,e.body.line.user)}),(function(e){this.openRank=[{index:1,name:"aaa",rank:20}],this.is_search=!0,this.DrawLine(this.issue,this.request,this.user)}))},DrawLine:function(e,t,a){var i=echarts.init(document.getElementById("line"),"white",{renderer:"canvas"}),s={animation:!0,animationThreshold:2e3,animationDuration:1e3,animationEasing:"cubicOut",animationDelay:0,animationDurationUpdate:300,animationEasingUpdate:"cubicOut",animationDelayUpdate:0,color:["#c23531","#2f4554","#61a0a8","#d48265","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3","#f05b72","#ef5b9c","#f47920","#905a3d","#fab27b","#2a5caa","#444693","#726930","#b2d235","#6d8346","#ac6767","#1d953f","#6950a1","#918597"],series:[{type:"line",name:"issue",connectNulls:!1,symbolSize:4,showSymbol:!0,smooth:!1,clip:!0,step:!1,data:e,hoverAnimation:!0,label:{show:!0,position:"top",margin:8},lineStyle:{show:!0,width:2,opacity:1,curveness:0,type:"solid"},areaStyle:{opacity:0},zlevel:0,z:0},{type:"line",name:"request",connectNulls:!1,symbolSize:4,showSymbol:!0,smooth:!1,clip:!0,step:!1,data:t,hoverAnimation:!0,label:{show:!0,position:"top",margin:8},lineStyle:{show:!0,width:2,opacity:1,curveness:0,type:"solid"},areaStyle:{opacity:0},zlevel:0,z:0},{type:"line",name:"user",connectNulls:!1,symbolSize:4,showSymbol:!0,smooth:!1,clip:!0,step:!1,data:a,hoverAnimation:!0,label:{show:!0,position:"top",margin:8},lineStyle:{show:!0,width:2,opacity:1,curveness:0,type:"solid"},areaStyle:{opacity:0},zlevel:0,z:0}],legend:[{data:["request","issue","user"],selected:{issue:!0,issue:!0,user:!0},show:!0,padding:5,itemGap:10,itemWidth:25,itemHeight:14}],tooltip:{show:!0,trigger:"item",triggerOn:"mousemove|click",axisPointer:{type:"line"},showContent:!0,alwaysShowContent:!1,showDelay:0,hideDelay:100,textStyle:{fontSize:14},borderWidth:0,padding:5},xAxis:[{name:"x",show:!0,scale:!1,nameLocation:"end",nameGap:15,gridIndex:0,inverse:!1,offset:0,splitNumber:5,minInterval:0,splitLine:{show:!1,lineStyle:{show:!0,width:1,opacity:1,curveness:0,type:"solid"}},data:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]}],yAxis:[{name:"y",show:!0,scale:!0,nameLocation:"end",nameGap:15,gridIndex:0,inverse:!1,offset:0,splitNumber:5,minInterval:0,splitLine:{show:!0,lineStyle:{show:!0,width:1,opacity:1,curveness:0,type:"solid"}}}],title:[{padding:5,itemGap:10}]};i.setOption(s)},DrawPie:function(e){var t=echarts.init(document.getElementById("pie"),"white",{renderer:"canvas"}),a={animation:!0,animationThreshold:2e3,animationDuration:1e3,animationEasing:"cubicOut",animationDelay:0,animationDurationUpdate:300,animationEasingUpdate:"cubicOut",animationDelayUpdate:0,color:["#c23531","#2f4554","#61a0a8","#d48265","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3","#f05b72","#ef5b9c","#f47920","#905a3d","#fab27b","#2a5caa","#444693","#726930","#b2d235","#6d8346","#ac6767","#1d953f","#6950a1","#918597"],series:[{type:"pie",clockwise:!0,data:e,radius:["40%","75%"],center:["50%","50%"],label:{show:!0,position:"top",margin:8,formatter:"{b}: {c}"},rippleEffect:{show:!0,brushType:"stroke",scale:2.5,period:4}}],legend:[{data:["Core Developers","Temporary Developers","Issue Participants"],selected:{},show:!0,left:"2%",top:"10%",orient:"vertical",padding:5,itemGap:10,itemWidth:25,itemHeight:14}],tooltip:{show:!0,trigger:"item",triggerOn:"mousemove|click",axisPointer:{type:"line"},showContent:!0,alwaysShowContent:!1,showDelay:0,hideDelay:100,textStyle:{fontSize:14},borderWidth:0,padding:5},title:[{padding:5,itemGap:10}]};t.setOption(a)}}},te=ee,ae=(0,l.Z)(te,K,Q,!1,null,null,null),ie=ae.exports,se=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{width:"100%"}},[t("div",{staticClass:"upload-content"},[t("div",{staticClass:"user-search-area"},[t("div",{staticClass:"search-form"},[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[t("el-form-item",{attrs:{label:"用户名"}},[t("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),t("el-form-item",{attrs:{label:""}},[t("el-date-picker",{attrs:{type:"monthrange",align:"right","unlink-panels":"","range-separator":"~","start-placeholder":"开始月份","end-placeholder":"结束月份","picker-options":e.pickerOptions},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.UserAnalyze}},[e._v("查询")])],1)],1)],1)]),t("div",{staticClass:"user-result-area"},[t("div",{staticClass:"user-graph-area"},[t("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"关系图",name:"first"}},[t("el-empty",{directives:[{name:"show",rawName:"v-show",value:!e.is_search,expression:"!is_search"}],attrs:{description:"无结果"}}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.is_search,expression:"is_search"}],attrs:{id:"user-graph"}})],1)],1)],1),t("div",{staticClass:"user-data-area"},[t("div",{staticClass:"user-info-area"},[t("div",{staticStyle:{width:"90%",margin:"0 auto","margin-top":"2%"}},[t("div",{staticStyle:{"font-size":"larger","text-align":"center","margin-bottom":"5%"}},[e._v("查询信息")]),t("el-descriptions",{attrs:{column:"1"}},[t("template",{slot:"extra"}),t("el-descriptions-item",{attrs:{label:"用户名"}},[t("el-tag",{attrs:{size:"small"}},[e._v(e._s(this.info.name))])],1),t("el-descriptions-item",{attrs:{label:"时间"}},[t("el-tag",{attrs:{size:"small"}},[e._v(e._s(this.info.time.start.year)+"-"+e._s(this.info.time.start.month)+" ~ "+e._s(this.info.time.end.year)+"-"+e._s(this.info.time.end.month))])],1)],2),t("el-descriptions",{attrs:{column:"3"}},[t("template",{slot:"extra"}),t("el-descriptions-item",{attrs:{label:"参与项目数"}},[t("el-tag",{attrs:{size:"small"}},[e._v(e._s(this.info.project))])],1),t("el-descriptions-item",{attrs:{label:"参与pr数"}},[t("el-tag",{attrs:{size:"small"}},[e._v(e._s(this.info.pr))])],1),t("el-descriptions-item",{attrs:{label:"issue数"}},[t("el-tag",{attrs:{size:"small",type:"primary"}},[e._v(e._s(this.info.issue))])],1)],2)],1)]),t("div",{staticClass:"user-line-area"},[t("el-empty",{directives:[{name:"show",rawName:"v-show",value:!e.is_search,expression:"!is_search"}],attrs:{description:"无结果","image-size":100}}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.is_search,expression:"is_search"}],staticStyle:{width:"390px",height:"250px"},attrs:{id:"user-line"}})],1),t("div",{staticClass:"user-pie-area"},[t("el-empty",{directives:[{name:"show",rawName:"v-show",value:!e.is_search,expression:"!is_search"}],attrs:{description:"无结果","image-size":100}}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.is_search,expression:"is_search"}],staticStyle:{width:"390px",height:"250px"},attrs:{id:"user-pie"}})],1)])])])])},ne=[],oe={name:"UserAnalyzeComponent",data(){return{is_search:!1,activeName:"first",name:"",pie_data:{label:["X-lab2017-open-wonderland","X-lab2017-open-research","X-lab2017-open-perf","X-lab2017-open-digger","X-lab2017-open-leaderboard"],data:[{name:"X-lab2017-open-wonderland",value:2},{name:"X-lab2017-open-research",value:1},{name:"X-lab2017-open-digger",value:1},{name:"X-lab2017-open-perf",value:2},{name:"X-lab2017-open-leaderboard",value:3}]},line_data:{project:[["2023-7",1],["2023-8",2],["2023-9",5],["2023-10",6],["2023-11",1],["2023-12",5]],issue:[["2023-7",2],["2023-8",3],["2023-9",4],["2023-10",6],["2023-11",1],["2023-12",5]],pr:[["2023-7",1],["2023-8",2],["2023-9",3],["2023-10",7],["2023-11",1],["2023-12",5]],x:["2023-7","2023-8","2023-9","2023-10","2023-11","2023-12"]},date:void 0,graph:void 0,info:{name:"Unknown",time:{start:{year:"Unknown",month:"Unknown"},end:{year:"Unknown",month:"Unknown"}},project:0,pr:0,issue:0},empty:!0,chart:void 0,graph:void 0,nodesNumber:0,edgesNumber:0,nodes:[{id:"0x75cd2467f8dd731a5acb927bd79c4cb361210db6",degree:2,cluster:-1},{id:"0xc611952d81e4ecbd17c8f963123dec5d7bce1c27",degree:2},{id:"0x4de23f3f0fb3318287378adbde030cf61714b2f3",degree:1}],edges:[{source:"0x75cd2467f8dd731a5acb927bd79c4cb361210db6",target:"0xc611952d81e4ecbd17c8f963123dec5d7bce1c27",value:"299928147539103754",tx_hash:"0xa1a658f372e0637d00b78753036068d71d48da9d6a924e8f6443bc3e5bbec940",blockNumber:"15265907"},{source:"0x75cd2467f8dd731a5acb927bd79c4cb361210db6",target:"0x4de23f3f0fb3318287378adbde030cf61714b2f3",value:"9000000000000000",tx_hash:"0x0dcf54ffa7d83238b8a44a9c2385a2d58a9f0d326116f293ba351076dbb38d4a",blockNumber:"15265929"},{source:"0x8bc90377daf1b4e71686d025c88b2178089cf3e8",target:"0xc611952d81e4ecbd17c8f963123dec5d7bce1c27",value:"2611540377663885806",tx_hash:"0x5ff169a9301adf698f6e78bd8c715aebb7fdd5404e24ef5b926a10adbc1b8772",blockNumber:"15265903"},{source:"0x1a26db1b2baf0b23f18e19375e8fdc159feb707e",target:"0xc611952d81e4ecbd17c8f963123dec5d7bce1c27",value:"473558773599046477",tx_hash:"0xc708b1f3315db9966a677782efc896364803cb457cdfc2ae76ff9141935fd532",blockNumber:"15265905"},{source:"0x43da6d2db9651b7042e31ffb2607a7cfa4d5d03b",target:"0xc611952d81e4ecbd17c8f963123dec5d7bce1c27",value:"621618643271362538",tx_hash:"0x51927ba1b63a5adf90dc8a673b459c9e5e3e42c2ae3157ca57ae7a54232c75a0",blockNumber:"15265905"},{source:"0xe5c04c954c5494f6975f63e3f19957a380648f82",target:"0xc611952d81e4ecbd17c8f963123dec5d7bce1c27",value:"223324337176025309",tx_hash:"0x0c3ecd77775785129d70adcb43c656c854f22699f3350aa17693af608d3729ee",blockNumber:"15265907"},{source:"0x795d8f8b2bf1bb23e99e165c8e4fa067d96cb00a",target:"0xc611952d81e4ecbd17c8f963123dec5d7bce1c27",value:"216300000000000000",tx_hash:"0xf59060ff06f14fd261a81272b562afe7c4a9a5642ead937962858a8f54a601b9",blockNumber:"15265907"},{source:"0xbdf4cf8269c3883dd88975e1978a6aa9d3877f2e",target:"0xc611952d81e4ecbd17c8f963123dec5d7bce1c27",value:"288173851825282417",tx_hash:"0x851c13f6fd11fe61bc40e6f071d1bd1fb2b667adbed715534c3a631c48c5eb49",blockNumber:"15265907"},{source:"0x1e29e2cefd3395d892678add3eb791ed74114f3b",target:"0xc611952d81e4ecbd17c8f963123dec5d7bce1c27",value:"284693896987212129",tx_hash:"0x1ddbf38bf57786d3e1079cc53a81168f0b7ac958b838bdfeb6a77dfb1cc134af",blockNumber:"15265907"},{source:"0x47537db3dfec13e9f20fb4f4cd0cf26e2cc37fdd",target:"0xc611952d81e4ecbd17c8f963123dec5d7bce1c27",value:"265102276730551319",tx_hash:"0x24dca1ae019a880520049e5ac75d6a49c009cb3dfe59de0b6261859070ec0ae3",blockNumber:"15265907"},{source:"0x4842336fdaf0405e12c7e968dc1998856672a4d7",target:"0xc611952d81e4ecbd17c8f963123dec5d7bce1c27",value:"373844808070480320",tx_hash:"0xec5da3e3ec57dc29b534888f9874b1733f0d425518180bce2ba8e2511ac4119c",blockNumber:"15266086"},{source:"0x6e8b6af9d8b402d89d1f5d8c1cf535850dc28b98",target:"0xc611952d81e4ecbd17c8f963123dec5d7bce1c27",value:"116709184816773670",tx_hash:"0x8992fd93bc4dd5fb7a811718313802cc4b6043a9aad6ef847c35ebb47326273a",blockNumber:"15266104"},{source:"0xa789d472cfef01e09674e4a6c03b35c72e0bfdb0",target:"0xc611952d81e4ecbd17c8f963123dec5d7bce1c27",value:"1847142590831247533",tx_hash:"0x18e0e10013a4d14535f465e54f051c34607f4c654b2c59a6ac58e5588ee07363",blockNumber:"15266490"}]}},components:{RankComponent:J},mounted(){},methods:{UserAnalyze:function(){let e=this.date[0].getYear()+1900,t=this.date[0].getMonth()+1,a=this.date[1].getYear()+1900,i=this.date[1].getMonth()+1;console.log("UserAnalyze",this.name,e,t,a,i),this.$http.post("/api/UserAnalyze/",{name:this.name,startYear:e,startMonth:t,endYear:a,endMonth:i},{headers:{"Content-Type":"application/json"}},{emulateJSON:!0}).then((function(e){this.code=200,this.is_search=!0,this.info=e.body.info,this.drawUserPie(e.body.pie.data,e.body.pie.label),this.drawUserGraph(e.body.option.nodes,e.body.option.edges),this.drawUserLine(e.body.line.project,e.body.line.pr,e.body.line.issue,e.body.line.x)}),(function(e){this.is_search=!0,this.drawUserPie(this.pie_data["data"],this.pie_data["label"]),this.drawUserLine(this.line_data["project"],this.line_data["pr"],this.line_data["issue"],this.line_data["x"])}))},drawUserGraph:function(e,t){void 0!=this.chart&&this.chart.destroy(),void 0!=this.graph&&(this.graph.destroy(),this.graph=void 0);const a=new this.$antv.Tooltip({offsetX:10,offsetY:10,itemTypes:["node","edge"],getContent:e=>{const t=document.createElement("div");function a(e){switch(e){case"r":return"repository";case"u":return"user";case"i":return"issue";default:return"pull request"}}return t.style.padding="0px 40px 0px 20px","node"==e.item.getType()?t.innerHTML=`\n        <h4>节点信息</h4>\n        <ul>\n            <li>ID: ${e.item.getModel().id}</li>\n            <li>名称: ${e.item.getModel().n}</li>\n            <li>类别: ${a(e.item.getModel().c)}</li>\n            <li>OpenRank值: ${e.item.getModel().v}</li>\n        </ul>`:"edge"==e.item.getType()&&(t.innerHTML=`\n        <h4>边信息</h4>\n        <ul>\n          <li>起点ID: ${e.item.getModel().source}</li>\n          <li>终点ID: ${e.item.getModel().target}</li>\n          <li>边权重: ${e.item.getModel().weight}</li>\n        </ul>\n        `),t},shouldBegin:e=>{let t=!0;switch(e.item.getModel().id){case"1":t=!1;break;case"2":t="text-shape"===e.target.get("name");break;case"3":t="text-shape"!==e.target.get("name");break;default:t=!0;break}return t}}),i=document.getElementById("user-graph"),s=800,n=600,o=10,r=20,l=15,c={r:{type:"rect",size:r,style:{fill:"#5B6FBF"}},u:{type:"rect",size:r,style:{fill:"#DE6F6A"}},i:{type:"rect",size:r,style:{fill:"#9EC97F"}},p:{type:"rect",size:r,style:{fill:"#F2C96C"}}},d={nodes:[{id:"r",label:"repo",...c["r"],labelCfg:{style:{fontSize:l}}},{id:"u",label:"user",...c["u"],labelCfg:{style:{fontSize:l}}},{id:"i",label:"issue",...c["i"],labelCfg:{style:{fontSize:l}}},{id:"p",label:"pull",...c["p"],labelCfg:{style:{fontSize:l}}}]},h=new this.$antv.Legend({data:d,align:"center",layout:"horizontal",vertiSep:12,horiSep:24,offsetY:n-75,padding:[4,16,8,16],containerStyle:{fill:"",lineWidth:0},title:" ",titleConfig:{position:"center",offsetX:0,offsetY:0},filter:{enable:!0,multiple:!0,trigger:"click",graphActiveState:"activeByLegend",graphInactiveState:"inactiveByLegend",filterFunctions:{r:e=>"r"===e.c,u:e=>"u"===e.c,i:e=>"i"===e.c,p:e=>"p"===e.c}}}),p=new this.$antv.ToolBar({position:{x:25,y:10}}),u=new this.$antv.Graph({container:"user-graph",width:s,height:n,layout:{preventOverlap:!0,type:"force",nodeSpacing:15},defaultNode:{size:15,lineWidth:0,style:{lineWidth:0}},nodeStateStyles:{activeByLegend:{lineWidth:3,strokeOpacity:.5,stroke:"#f00"},inactiveByLegend:{opacity:.5,lineWidth:0,strokeOpacity:0,stroke:""},dark:{lineWidth:0,opacity:.2},mouseenterState:{lineWidth:3,strokeOpacity:.5,stroke:"#5B8FF9"},noLineWidthState:{lineWidth:0}},edgeStateStyles:{mouseenterState:{lineWidth:1.5,stroke:"#999"}},plugins:[h,a,p],modes:{default:["drag-canvas","drag-node","zoom-canvas"]}});function b(e){switch(e){case"r":return"#5B6FBF";case"u":return"#DE6F6A";case"i":return"#9EC97F";default:return"#F2C96C"}}function m(e,t,a){return e<=a?t*e:m(e-a,t/2,a)+a*t}function f(e){return e.sort(((e,t)=>t.v-e.v)),e[o-1].v}function g(e,t){switch(e){case"r":return t;case"u":return t;case"i":return"#"+t;default:return"#"+t}}let v=e,y=t.map((function(e,t){return e.source=e.s,e.target=e.t,e.weight=e.w,Object.assign({},e)}));function w(){u.setAutoPaint(!1),u.getNodes().forEach((function(e){u.clearItemStates(e),u.setItemState(e,"noLineWidthState",!0)})),u.getEdges().forEach((function(e){u.clearItemStates(e),u.setItemState(e,"noLineWidthState",!0)})),u.paint(),u.setAutoPaint(!0)}function x(e){const t=e.item.get("model");t.fx=e.x,t.fy=e.y}v.forEach((e=>{e.size=m(e.v,6,2),e.style={fill:b(e.c),lineWidth:0},e.v>=f(v)&&(e.label=g(e.c,e.n),e.labelCfg={position:"bottom"})})),u.data({nodes:v,edges:y}),u.render(),u.on("node:dragstart",(function(e){u.layout(),x(e)})),u.on("node:drag",(function(e){const t=u.get("layoutController").layoutMethods[0];t.execute(),x(e)})),u.on("node:dragend",(function(e){e.item.get("model").fx=null,e.item.get("model").fy=null})),u.on("node:click",(e=>{const{item:t}=e;t.toFront()})),u.on("node:mouseenter",(function(e){const t=e.item;u.setAutoPaint(!1),u.getNodes().forEach((function(e){u.clearItemStates(e),u.setItemState(e,"dark",!0)})),u.setItemState(t,"dark",!1),u.setItemState(t,"mouseenterState",!0),u.getEdges().forEach((function(e){e.getSource()===t?(u.setItemState(e.getTarget(),"dark",!1),u.setItemState(e.getTarget(),"mouseenterState",!0),u.setItemState(e,"mouseenterState",!0),e.toFront()):e.getTarget()===t?(u.setItemState(e.getSource(),"dark",!1),u.setItemState(e.getSource(),"mouseenterState",!0),u.setItemState(e,"mouseenterState",!0),e.toFront()):u.setItemState(e,"mouseenterState",!1)})),u.paint(),u.setAutoPaint(!0)})),u.on("node:mouseleave",w),u.on("canvas:click",w),"undefined"!==typeof window&&(window.onresize=()=>{u&&!u.get("destroyed")&&i&&i.scrollWidth&&i.scrollHeight&&u.changeSize(i.scrollWidth,i.scrollHeight)}),this.graph=u},drawUserLine:function(e,t,a,i){var s=echarts.init(document.getElementById("user-line"),"white",{renderer:"canvas"}),n={animation:!0,animationThreshold:2e3,animationDuration:1e3,animationEasing:"cubicOut",animationDelay:0,animationDurationUpdate:300,animationEasingUpdate:"cubicOut",animationDelayUpdate:0,color:["#c23531","#2f4554","#61a0a8","#d48265","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3","#f05b72","#ef5b9c","#f47920","#905a3d","#fab27b","#2a5caa","#444693","#726930","#b2d235","#6d8346","#ac6767","#1d953f","#6950a1","#918597"],series:[{type:"line",name:"project",connectNulls:!1,symbolSize:4,showSymbol:!0,smooth:!1,clip:!0,step:!1,data:e,hoverAnimation:!0,label:{show:!0,position:"top",margin:8},lineStyle:{show:!0,width:2,opacity:1,curveness:0,type:"solid"},areaStyle:{opacity:0},zlevel:0,z:0},{type:"line",name:"pr",connectNulls:!1,symbolSize:4,showSymbol:!0,smooth:!1,clip:!0,step:!1,data:t,hoverAnimation:!0,label:{show:!0,position:"top",margin:8},lineStyle:{show:!0,width:2,opacity:1,curveness:0,type:"solid"},areaStyle:{opacity:0},zlevel:0,z:0},{type:"line",name:"issue",connectNulls:!1,symbolSize:4,showSymbol:!0,smooth:!1,clip:!0,step:!1,data:a,hoverAnimation:!0,label:{show:!0,position:"top",margin:8},lineStyle:{show:!0,width:2,opacity:1,curveness:0,type:"solid"},areaStyle:{opacity:0},zlevel:0,z:0}],legend:[{data:["project","pr","issue"],selected:{project:!0,pr:!0,issue:!0},show:!0,padding:5,itemGap:10,itemWidth:25,itemHeight:14}],tooltip:{show:!0,trigger:"item",triggerOn:"mousemove|click",axisPointer:{type:"line"},showContent:!0,alwaysShowContent:!1,showDelay:0,hideDelay:100,textStyle:{fontSize:14},borderWidth:0,padding:5},xAxis:[{name:"x",show:!0,scale:!1,nameLocation:"end",nameGap:15,gridIndex:0,inverse:!1,offset:0,splitNumber:5,minInterval:0,splitLine:{show:!1,lineStyle:{show:!0,width:1,opacity:1,curveness:0,type:"solid"}},data:i}],yAxis:[{name:"y",show:!0,scale:!0,nameLocation:"end",nameGap:15,gridIndex:0,inverse:!1,offset:0,splitNumber:5,minInterval:0,splitLine:{show:!0,lineStyle:{show:!0,width:1,opacity:1,curveness:0,type:"solid"}}}]};s.setOption(n)},drawUserPie:function(e,t){console.log(e);var a=echarts.init(document.getElementById("user-pie"),"white",{renderer:"canvas"}),i={animation:!0,animationThreshold:2e3,animationDuration:1e3,animationEasing:"cubicOut",animationDelay:0,animationDurationUpdate:300,animationEasingUpdate:"cubicOut",animationDelayUpdate:0,color:["#c23531","#2f4554","#61a0a8","#d48265","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3","#f05b72","#ef5b9c","#f47920","#905a3d","#fab27b","#2a5caa","#444693","#726930","#b2d235","#6d8346","#ac6767","#1d953f","#6950a1","#918597"],series:[{type:"pie",clockwise:!0,data:e,radius:["40%","75%"],center:["50%","50%"],label:{show:!0,position:"top",margin:8,formatter:"{c}"},rippleEffect:{show:!0,brushType:"stroke",scale:2.5,period:4}}],legend:[{data:t,selected:{},type:"scroll",show:!0,bottom:"0",padding:5,itemGap:10,itemWidth:25,itemHeight:14}],tooltip:{show:!0,trigger:"item",triggerOn:"mousemove|click",axisPointer:{type:"line"},showContent:!0,alwaysShowContent:!1,showDelay:0,hideDelay:100,textStyle:{fontSize:14},borderWidth:0,padding:5}};a.setOption(i)}}},re=oe,le=(0,l.Z)(re,se,ne,!1,null,null,null),ce=le.exports,de=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{width:"100%"}},[t("div",{staticClass:"upload-content"},[t("div",{staticClass:"upload-area"},[t("el-upload",{ref:"upload",staticClass:"upload",attrs:{drag:"",action:"/data/upload/",accept:".json",limit:2,"show-file-list":!1,multiple:"","on-exceed":e.handleExceed,"on-success":e.handleSuccess,"on-error":e.handleError,"before-upload":e.handleUpload}},[t("div",{staticStyle:{margin:"0 auto",width:"80%"}},[t("i",{staticClass:"el-icon-upload"}),t("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),t("em",[e._v("点击上传")])]),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传edge.json和vertex.json")])])])],1),t("div",{staticClass:"search-area"},[t("div",{staticClass:"upload-info"},[t("el-descriptions",{attrs:{title:"上传信息"}},[t("template",{slot:"extra"}),t("el-descriptions-item",{attrs:{label:"账户数"}},[t("el-tag",{attrs:{size:"small"}},[e._v(e._s(this.NodeNumber))])],1),t("el-descriptions-item",{attrs:{label:"交易数"}},[t("el-tag",{attrs:{size:"small"}},[e._v(e._s(this.EdgeNumber))])],1),t("el-descriptions-item",{attrs:{label:"区块范围"}},[t("el-tag",{attrs:{size:"small",type:"primary"}},[e._v(e._s(this.blocknumber["min"]))]),e._v("~"),t("el-tag",{attrs:{type:"primary",size:"small"}},[e._v(e._s(this.blocknumber["max"]))])],1),t("el-descriptions-item",{attrs:{label:"异常行为数"}},[t("el-tag",{attrs:{size:"small",type:"primary"}},[e._v(e._s(0==this.labelNumber?0:this.labelNumber-1))])],1),t("el-descriptions-item",{attrs:{label:"时间戳"}},[t("el-tag",{attrs:{size:"small",type:"primary"}},[e._v(e._s(this.timestamp))])],1)],2)],1)])]),t("el-tabs",{staticStyle:{"margin-left":"2%","margin-top":"4%"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{staticStyle:{width:"100%"},attrs:{label:"异常",name:"GraphTab"}},[t("div",{staticClass:"search-result"},[t("div",{staticClass:"search-result"},[t("div",{staticClass:"table-result"},[t("TableComponent",{attrs:{data:e.aberration,open:e.popper}})],1)])])])],1)],1)},he=[],pe={name:"UploadComponent",props:{open:{type:Function,default:null},popper:{type:Function,default:null}},data(){return{activeName:"GraphTab",fullshow:!1,option4Graph:{},uploading:!1,successNumber:0,edgeJson:!1,VertexJson:!1,labelNumber:0,NodeNumber:0,EdgeNumber:0,labelSelect:"",label:[],blocknumber:{max:"Unknown",min:"Unknown"},timestamp:"未上传",aberration:[]}},components:{TableComponent:y,NetGraph:C},mounted(){},methods:{openProp(){this.option4Graph!={}&&void 0!=this.option4Graph&&this.popper(this.option4Graph,!1)},search(){let e=this.labelSelect;this.$http.post("/data/timeline/",{label:e},{headers:{"Content-Type":"application/json"}},{emulateJSON:!0}).then((function(e){this.code=200,this.activeNumber=3,this.option4Graph=e.body.json}),(function(e){this.code=e.status,this.message=e.body.message}))},openEdgeInfo(e,t,a,i,s){this.open(e,t,a,i,s)},newUpload(){this.edgeJson=!1,this.VertexJson=!1},handleSuccess(e,t){this.showMessage("success"),this.successNumber+=1,"edge.json"==t.name&&(this.edgeJson=!0),"vertex.json"==t.name&&(this.VertexJson=!0),2==this.successNumber&&(this.$http.get("/data/info/",{},{headers:{"Content-Type":"application/json"}},{emulateJSON:!0}).then((function(e){this.code=200,this.labelNumber=e.body.labelNumber,this.blocknumber=e.body.blocknumberRange,this.timestamp=e.body.timestamp,this.NodeNumber=e.body.NodeNumber,this.EdgeNumber=e.body.EdgeNumber,this.label=e.body.label,this.successNumber=0,this.VertexJson=!1,this.edgeJson=!1,this.$refs.upload.clearFiles()}),(function(e){this.code=e.status,this.message=e.body.message,this.showMessage("error",e.body.message),this.$refs.upload.clearFiles(),this.successNumber=0,this.VertexJson=!1,this.edgeJson=!1})),this.$http.get("/data/aberration/",{},{headers:{"Content-Type":"application/json"}},{emulateJSON:!0}).then((function(e){this.aberration=e.body.aberration}),(function(e){this.showMessage("error",e.body.message)}))),console.log(e)},handleError(e){this.showMessage("error",e),console.log(e)},handleExceed(){this.showMessage("exceed")},handleUpload(e){return!this.uploading&&("edge.json"==e.name&&this.edgeJson||"vertex.json"==e.name&&this.VertexJson?(this.showMessage("repeatError"),this.$refs.upload.clearFiles(),!1):"edge.json"!=e.name&&"vertex.json"!=e.name?(this.showMessage("nameError"),this.$refs.upload.clearFiles(),!1):void 0)},showMessage(e,t){"exceed"==e?this.$notify({title:"Error",message:"Exceed Error: The number of files exceeds the limit",type:"warning"}):"success"==e?this.$notify({title:"Success",message:"Success: Upload Success",type:"success"}):"error"==e?this.$notify.error({title:"Error",message:t}):"nameError"==e?this.$notify.error({title:"Error",message:"Name Error: The name of file must be edge.json or vertex.json"}):"repeatError"==e&&this.$notify.error({title:"Error",message:"Repeat Upload Error: edge.json or vertex.json has been uploaded"})}}},ue=pe,be=(0,l.Z)(ue,de,he,!1,null,null,null);be.exports;i["default"].use(h.Z);var me=new h.Z({mode:"history",routes:[{path:"/",name:"index",component:V},{path:"/network_analyze",name:"NetworkAnalyze",component:ie},{path:"/user_analyze",name:"UserAnalyze",component:ce},{path:"/network_search",name:"NetworkSearch",component:V}]}),fe=a(9618),ge=a(3845),ve=a(8499),ye=a.n(ve),we=a(7752),xe=a(6642);i["default"].use(xe.ZP),i["default"].use(ye()),i["default"].config.productionTip=!1,i["default"].prototype.zrender=fe,i["default"].prototype.$echarts=ge,i["default"].prototype.$antv=we.ZP,new i["default"]({render:e=>e(d),router:me}).$mount("#app")},6608:function(){}},t={};function a(i){var s=t[i];if(void 0!==s)return s.exports;var n=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(n.exports,n,n.exports,a),n.loaded=!0,n.exports}a.m=e,function(){var e=[];a.O=function(t,i,s,n){if(!i){var o=1/0;for(d=0;d<e.length;d++){i=e[d][0],s=e[d][1],n=e[d][2];for(var r=!0,l=0;l<i.length;l++)(!1&n||o>=n)&&Object.keys(a.O).every((function(e){return a.O[e](i[l])}))?i.splice(l--,1):(r=!1,n<o&&(o=n));if(r){e.splice(d--,1);var c=s();void 0!==c&&(t=c)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[i,s,n]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var i in t)a.o(t,i)&&!a.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,i){var s,n,o=i[0],r=i[1],l=i[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(s in r)a.o(r,s)&&(a.m[s]=r[s]);if(l)var d=l(a)}for(t&&t(i);c<o.length;c++)n=o[c],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(d)},i=self["webpackChunkdemo4sraft"]=self["webpackChunkdemo4sraft"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=a.O(void 0,[998],(function(){return a(7103)}));i=a.O(i)})();
//# sourceMappingURL=app.2864bea6.js.map